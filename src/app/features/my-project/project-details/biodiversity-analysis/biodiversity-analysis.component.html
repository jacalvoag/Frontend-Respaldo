<div class="section-header">
    <h2 class="section-title">Análisis de biodiversidad</h2>
    
    <div class="buttons-header">
        <button  class="button-light">
            <svg class="svg-button" xmlns="http://www.w3.org/2000/svg" height="18px" viewBox="0 -960 960 960" width="18px" fill="#000000">
                <path fill="currentColor" d="M480-320 280-520l56-58 104 104v-326h80v326l104-104 56 58-200 200ZM240-160q-33 0-56.5-23.5T160-240v-120h80v120h480v-120h80v120q0 33-23.5 56.5T720-160H240Z"/>
            </svg>
            Descargar análisis
        </button>
    </div>
</div>

<div class="rayita"></div>

<h2>Índices de biodiversidad por zona de estudio</h2>

<div class="projects-grid">
    @for (zone of info()?.zone; track zone.idZone; let i = $index) {
        <div>
            <div class="base-card">
                <div class="info-container">
                    <h3>{{zone.zoneName}}</h3>
                    <p>S' = {{ zone.biodiversityAnalysis.shannonWiener}}</p>
                    <p>D = {{ zone.biodiversityAnalysis.simpson}}</p>
                    <p>d = {{ zone.biodiversityAnalysis.margaleft}}</p>
                    <p>J' = {{ zone.biodiversityAnalysis.pielou}}</p>
                </div>

                <div class="badge-container">
                            <span class="badge">{{zone.squareFootage}}</span>
                        </div>
            </div>
        </div>
    }
</div>

<div>
    <h2>Gráficas por zona de estudio</h2>
</div>

<div class="projects-grid">
    
    @if (zonesList().length > 0) {
        
        @for (zone of zonesList(); track zone.idZone) { 
            <div class="zone-chart-wrapper">
                <h3 class="zone-title">{{ zone.zoneName }}</h3>
                
                <app-study-zone-charts
                    [single]="transformAnalysisToChartData(zone.biodiversityAnalysis)" 
                    [xAxisLabel]="zone.zoneName">
                </app-study-zone-charts>
            </div>

        } @empty {
            <p>No se encontraron análisis de biodiversidad para las zonas de este proyecto.</p>
        }
    } @else {
        <p>Cargando datos de zonas o no hay zonas disponibles.</p>
    }
</div>